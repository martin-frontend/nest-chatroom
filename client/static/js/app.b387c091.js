(function(t){function e(e){for(var a,o,c=e[0],r=e[1],u=e[2],m=0,f=[];m<c.length;m++)o=c[m],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&f.push(s[o][0]),s[o]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);l&&l(e);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,c=1;c<n.length;c++){var r=n[c];0!==s[r]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},s={app:0},i=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/chatroom1/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=r;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"0a01":function(t,e,n){"use strict";n("8b92")},"0f79":function(t,e,n){"use strict";n("c4ca")},"4b3b":function(t,e,n){t.exports=n.p+"static/img/681494.03a0ce31.svg"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],o=(n("034f"),n("2877")),c={},r=Object(o["a"])(c,s,i,!1,null,null,null),u=r.exports,l=(n("b0c0"),n("2f62"));a["a"].use(l["a"]);var m=new l["a"].Store({state:{name:""},mutations:{SET_NAME:function(t,e){t.name=e}},actions:{"<ACTION_PREFIX><EVENT_NAME>":function(){}}}),f=n("5132"),d=n.n(f),p=(n("96cf"),n("1da1")),b=n("8c4f"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chatroom",on:{click:function(e){t.isShowEmoji=!1}}},[a("nav",{staticClass:"navbar"},[a("div",{staticClass:"user-count"},[a("img",{staticClass:"icon",attrs:{src:n("4b3b"),width:"25",height:"25",alt:""}}),t.users?a("span",{staticClass:"count"},[t._v(t._s(Object.keys(t.users).length))]):t._e(),t._l(t.users,(function(e,n){return a("span",{key:n,staticClass:"name"},[t._v(t._s(e))])}))],2)]),a("div",{staticClass:"container"},[a("div",{staticClass:"chat"},[t.messages.length>0?t._l(t.messages,(function(e,s){return a("div",{key:s,staticClass:"message",class:e.className},["text"===e.type||"system"===e.type?[a("div",{staticClass:"message-content"},["left-message"===e.className?[a("div",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "+t._s(e.message)+" ")]:t._e(),"middle-message"===e.className?[a("img",{attrs:{src:n("7663"),alt:""}}),a("br"),t._v(" - "+t._s(e.name)+t._s(e.message)+" - ")]:t._e(),"right-message"===e.className?[t._v(" "+t._s(e.message)+" ")]:t._e()],2)]:t._e(),"img"===e.type?[a("div",{staticClass:"message-content"},["left-message"===e.className?a("div",{staticClass:"name",staticStyle:{"text-align":"left"}},[t._v(t._s(e.name))]):t._e(),a("viewer",{attrs:{images:[e.message]}},[a("img",{attrs:{src:e.message,alt:""}})])],1)]:t._e()],2)})):t._e()],2),a("div",{staticClass:"toolbar"},[a("img",{class:{show:t.isShowEmoji},attrs:{src:n("f516"),width:"30",height:"30",alt:""},on:{click:function(e){e.stopPropagation(),t.isShowEmoji=!t.isShowEmoji}}}),a("img",{attrs:{src:n("5efb"),width:"30",height:"30",alt:""},on:{click:function(e){return t.fileElement.click()}}}),t.isShowEmoji?a("Emoji"):t._e()],1),a("div",{staticClass:"message-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{type:"text"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}}),a("img",{class:{light:t.text},attrs:{src:n("7fba"),width:"20",height:"20",alt:""},on:{click:t.send}})])])])},g=[],v=(n("4160"),n("d3b7"),n("159b"),n("5530")),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"emoji-container"},[n("h3",[t._v("Emoji")]),n("div",{staticClass:"content"},t._l(t.emojiList,(function(e){return n("div",{key:e,staticClass:"wrap",attrs:{cols:"2"},on:{click:function(n){return t.inputEmoji(e)}}},[n("label",{staticClass:"emoji",attrs:{for:"inputMessage"}},[t._v(t._s(e))])])})),0)])},x=[],y={name:"Emjio",data:function(){return{emojiList:["😀","😁","😂","🤣","😃","😄","😅","😆","😉","😊","😋","😎","😍","😘","🥰","😗","😙","😚","🙂","🤗","🤩","🤔","🤨","😐","😑","😶","🙄","😏","😣","😥","😮","🤐","😯","😪","😫","😴","😌","😛","😜","😝","🤤","😒","😓","😔","😕","🙃","🤑","😲","☹️","🙁","😖","😞","😟","😤","😢","😭","😦","😧","😨","😩","🤯","😬","😰","😱","🥵","🥶","😳","🤪","😵","😡","😠","🤬","😷","🤒","🤕","🤢","🤮","🤧","😇","🤠","🤡","🥳","🥴","🥺","🤥","🤫","🤭","🧐","🤓","😈","👿","👹","👺","💀","👻","👽","🤖","💩","😺","😸","😹","😻","😼","😽","🙀","😿","😾"]}},methods:{inputEmoji:function(t){this.$parent.addEmoji(t)}}},w=y,E=(n("0f79"),Object(o["a"])(w,_,x,!1,null,"72aa7f28",null)),j=E.exports,C={name:"Chatroom",components:{Emoji:j},data:function(){return{type:{1:"text",2:"img",3:"system",4:"html"},messages:[],text:"",users:null,isShowEmoji:!1,fileElement:null}},mounted:function(){this.fileElement=document.createElement("input"),this.fileElement.setAttribute("type","file"),this.fileElement.addEventListener("change",this.uploadFile)},sockets:{msgToClient:function(t){var e=this;t.messages.forEach((function(t){switch(t.type){case"system":e.$set(t,"className","middle-message");break;case"text":case"img":t.name===e.name?e.$set(t,"className","right-message"):e.$set(t,"className","left-message");break}})),this.users=t.users,this.messages=t.messages}},computed:Object(v["a"])({},Object(l["b"])(["name"])),methods:{send:function(){if(this.text){var t={message:this.text,name:this.name,type:"text"};this.$socket.emit("msgToServer",t),this.text=""}},addEmoji:function(t){this.text+=t},uploadFile:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.fileElement.files.item(0),a=new FileReader,a.readAsDataURL(n),e.next=5,new Promise((function(t){a.onload=function(e){t(e.target.result)}}));case 5:s=e.sent,t.$socket.emit("sendImage",s);case 7:case"end":return e.stop()}}),e)})))()}}},k=C,O=(n("d97c"),Object(o["a"])(k,h,g,!1,null,"1ea7c620",null)),S=O.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("div",{staticClass:"buble-div"},[n("div",{staticClass:"container"},[n("label",{attrs:{for:"input_name"}},[t._v("暱稱")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{id:"input_name",type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),n("div",{staticClass:"button-box"},[n("button",{class:{disabled:!t.name},attrs:{disabled:!t.name},on:{click:t.start}},[t._v("開始聊天")])])])])])},N=[],R={name:"Login",data:function(){return{name:""}},methods:{start:function(){this.$socket.emit("login",this.name),this.$store.commit("SET_NAME",this.name),this.$router.push({path:"chatroom"})}}},M=R,P=(n("f137"),Object(o["a"])(M,$,N,!1,null,"693015ac",null)),T=P.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("BubbleBackground"),n("router-view")],1)},I=[],B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"100%"}},[t._l(t.bubbleMax,(function(t,e){return n("div",{key:e,staticClass:"bubble",attrs:{id:"floating"+(e+1)}})})),t._t("default")],2)},L=[],F=(n("99af"),n("4de4"),n("c740"),n("a630"),n("caad"),n("d81d"),n("6062"),n("2532"),n("3ca3"),n("ddb0"),{components:{},data:function(){return{bubbles:[],bubbleMax:10}},mounted:function(){var t=this;setInterval((function(){t.blowABubble()}),3e3)},methods:{blowABubble:function(){var t=this,e=!1,n=document.styleSheets[e?6:0];if(!(t.bubbles.length>=t.bubbleMax)){var a=c(20,100),s=c(15,30),i=Array.from(new Array(t.bubbleMax)).map((function(t,e){return e+1})).filter((function(e){return!new Set(t.bubbles).has(e)})),o=i[c(0,i.length-1)];t.bubbles.push(o),n.insertRule(r(o)),n.addRule("#floating".concat(o),"\n        animation-duration: ".concat(s,"s;\n        animation-name: floating").concat(o,";\n        width: ").concat(a,"px;\n        height: ").concat(a,"px;\n        ")),setTimeout((function(){var e=Array.from(n.cssRules).findIndex((function(t){return t instanceof CSSStyleRule&&t.selectorText.includes("floating".concat(o))})),a=Array.from(n.cssRules).findIndex((function(t){return t instanceof CSSKeyframesRule&&t.name.includes("floating".concat(o))}));n.deleteRule(e),n.deleteRule(a),t.bubbles=t.bubbles.filter((function(t){return t!==o}))}),1e3*s)}function c(t,e){return Math.floor(Math.random()*(e-t+1))+t}function r(t){return"\n            @-webkit-keyframes floating".concat(t," {\n                0% {\n                    left: calc(").concat(c(0,100),"% - ").concat(a,"px);\n                    bottom: 0%;\n                    opacity: 0.1;\n                }\n                60% {\n                    left: calc(").concat(c(0,100),"% - ").concat(a,"px);\n                    bottom: ").concat(c(40,60),"%;\n                    opacity: 0.75;\n                }\n                100% {\n                    left: calc(").concat(c(0,100),"% - ").concat(a,"px);\n                    bottom: ").concat(c(80,100),"%;\n                    opacity: 0.1\n                }\n            }\n        ")}}}}),K=F,J=(n("0a01"),Object(o["a"])(K,B,L,!1,null,"b406c286",null)),z=J.exports,D={name:"Home",components:{BubbleBackground:z}},H=D,U=(n("fb2c"),Object(o["a"])(H,A,I,!1,null,"fa21e704",null)),V=U.exports;a["a"].use(b["a"]);var X=[{path:"/",redirect:"/login",component:V,children:[{path:"/login",name:"Login",component:T},{path:"/chatroom",name:"Chatroom",component:S}]}],q=new b["a"]({base:"/chatroom1/",routes:X}),G=q;G.beforeEach(function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,n,a){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=m.state.name,s?a():"/chatroom"===e.path?a({path:"/"}):a();case 2:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}());n("7371");var Q=n("6944"),W=n.n(Q);n("0808");a["a"].use(W.a,{defaultOptions:{zIndex:9999,toolbar:!0}}),a["a"].use(new d.a({debug:!0,connection:"https://vue-nest-chatroom.herokuapp.com/",vuex:{store:m,actionPrefix:"SOCKET_",mutationPrefix:"SOCKET_"},options:{path:""}})),a["a"].config.productionTip=!1,new a["a"]({store:m,router:G,render:function(t){return t(u)}}).$mount("#app")},"5efb":function(t,e,n){t.exports=n.p+"static/img/addImage-icon.e58e69c6.svg"},7371:function(t,e,n){},7663:function(t,e,n){t.exports=n.p+"static/img/anonymous-icon.bcb3abc1.svg"},"7fba":function(t,e,n){t.exports=n.p+"static/img/paper-plane.09c11588.svg"},"85ec":function(t,e,n){},"8b92":function(t,e,n){},"97bd":function(t,e,n){},a7f5:function(t,e,n){},ab94:function(t,e,n){},c4ca:function(t,e,n){},d97c:function(t,e,n){"use strict";n("a7f5")},f137:function(t,e,n){"use strict";n("ab94")},f516:function(t,e,n){t.exports=n.p+"static/img/emoji-icon.03add930.svg"},fb2c:function(t,e,n){"use strict";n("97bd")}});
//# sourceMappingURL=app.b387c091.js.map